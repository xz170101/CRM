<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dyz.dao.StudentMapper">

	<!-- 映射 -->
  		<!-- <resultMap type="student" id="stu">
			<id column="stu_id" property="stu_id"/>
			<result column="stu_Name" property="stu_Name"/>
			<result column="stu_Age" property="stu_Age"/>
			<result column="stu_Sex" property="stu_Sex"/>
			<result column="stu_Phone" property="stu_Phone"/>
			<result column="stu_Status" property="stu_Status"/>
			<result column="stu_PerState" property="stu_PerState"/>
			<result column="stu_MsgSource" property="stu_MsgSource"/>
			<result column="stu_SourceUrl" property="stu_SourceUrl"/>
			<result column="stu_SourceKeyWord" property="stu_SourceKeyWord"/>
			<result column="stu_Address" property="stu_Address"/>
			<result column="stu_NetPusherld" property="stu_NetPusherld"/>
			<result column="stu_qq" property="stu_qq"/>
			<result column="stu_WeiXin" property="stu_WeiXin"/>
			<result column="stu_Content" property="stu_Content"/>
			<result column="stu_CreateTime" property="stu_CreateTime"/>
			<result column="stu_LearnForward" property="stu_LearnForward"/>
			<result column="stu_isValid" property="stu_isValid"/>
			<result column="stu_Record" property="stu_Record"/>
			<result column="stu_isReturnVist" property="stu_isReturnVist"/>
			<result column="stu_isHome" property="stu_isHome"/>
			<result column="stu_firstVisitTime" property="stu_firstVisitTime"/>
			<result column="stu_HomeTime" property="stu_HomeTime"/>
			<result column="stu_LostValid" property="stu_LostValid"/>
			<result column="stu_isPay" property="stu_isPay"/>
			<result column="stu_PayTime" property="stu_PayTime"/>
			<result column="stu_Money" property="stu_Money"/>
			<result column="stu_isReturnMoney" property="stu_isReturnMoney"/>
			<result column="stu_isInClass" property="stu_isInClass"/>
			<result column="stu_inClassTime" property="stu_inClassTime"/>
			<result column="stu_inClassContent" property="stu_inClassContent"/>
			<result column="stu_AskerContent" property="stu_AskerContent"/>
			<result column="stu_isDel" property="stu_isDel"/>
			<result column="stu_FromPart" property="stu_FromPart"/>
			<result column="stu_stuConcern" property="stu_stuConcern"/>
			<result column="stu_isBaoBei" property="stu_isBaoBei"/>
			<result column="stu_ZiXunName" property="stu_ZiXunName"/>
			<result column="stu_CreateUser" property="stu_CreateUser"/>
			<result column="stu_preMoney" property="stu_preMoney"/>
			<result column="stu_preMoneyTime" property="stu_preMoneyTime"/>
			<result column="sexitInte" property="sexitInte"/>
			<result column="sexitString" property="sexitString"/>

			<result column="follows_Id" property="netfollows.follows_Id"/>
			<result column="stu_Id" property="netfollows.stu_Id"/>
			<result column="studentName" property="netfollows.studentName"/>
			<result column="followTime" property="netfollows.followTime"/>
			<result column="nextFollowTime" property="netfollows.nextFollowTime"/>
			<result column="conTent" property="netfollows.conTent"/>
			<result column="user_Id" property="netfollows.user_Id"/>
			<result column="followType" property="netfollows.followType"/>
			<result column="createTime" property="netfollows.createTime"/>
			<result column="followState" property="netfollows.followState"/>
			<result column="nexit1int" property="netfollows.nexit1int"/>
			<result column="nexit2String" property="netfollows.nexit2String"/>
	
			
						
			<result column="user_Id" property="netfollows.user.user_Id"/>
			<result column="loginName" property="netfollows.user.loginName"/>
			<result column="passWord" property="netfollows.user.passWord"/>
			<result column="psdWrongTime" property="netfollows.user.psdWrongTime"/>
			<result column="lockTime" property="netfollows.user.lockTime"/>
			<result column="protectEMail" property="netfollows.user.protectEMail"/>
			<result column="protectMTel" property="netfollows.user.protectMTel"/>
			<result column="loginTime" property="netfollows.user.loginTime"/>
			<result column="createTime" property="netfollows.user.createTime"/>
			<result column="isLockout" property="netfollows.user.isLockout"/>
			<result column="uexit2String" property="netfollows.user.uexit2String"/>
			<result column="uexit1int" property="netfollows.user.uexit1int"/>
			
		</resultMap>  -->
		<!-- 分页多条件查询 -->
	<select id="selectStudent" parameterType="fenye" resultType="student">
		select * FROM students 
		<where>			
			<if test="text1 !=null and text1!=''">
				and stu_Name like "%"#{text1}"%"
			</if>
			<if test="text2 !=null and text2!=''">
				and stu_Phone like "%"#{text2}"%"
			</if>
			<if test="text3 !=null and text2!=''">
				and stu_ZiXunName like "%"#{text2}"%"
			</if>		
			
			<!--integer  -->
			<if test="num1!=null and num1!=''">
				and stu_isPay=#{num1}
			</if>
			<if test="num2!=null and num2!=''">
				and stu_isValid=#{num2}
			</if>
			<if test="num3!=null and num3!=''">
				and stu_isReturnVist=#{num3}
			</if>
						
			<if test="text4 !=null and text4!=''">
				and stu_qq like "%"#{text4}"%"
			</if>
			<if test="text5 !=null and text5!=''">
				and stu_CreateTime like "%"#{text5}"%"
			</if>
				<if test="text6 !=null and text6!=''">
				and stu_HomeTime like "%"#{text6}"%"
			</if>
			<if test="text7 !=null and text7!=''">
				and stu_firstVisitTime like "%"#{text7}"%"
			</if>
				<if test="text8 !=null and text8!=''">
				and stu_PayTime like "%"#{text8}"%"
			</if>
			<if test="text9 !=null and text9!=''">
				and stu_isInClass like "%"#{text9}"%"
			</if>
		</where>				
		limit #{page},#{pageSize}
	</select>
	<!-- 查询总条数 -->
	<select id="selectCount" parameterType="fenye" resultType="int">
		select count(1) from students 
		<where>			
			<if test="text1 !=null and text1!=''">
				and stu_Name like "%"#{text1}"%"
			</if>
			<if test="text2 !=null and text2!=''">
				and stu_Phone like "%"#{text2}"%"
			</if>
			<if test="text3 !=null and text2!=''">
				and stu_ZiXunName like "%"#{text2}"%"
			</if>		
			
			<!--integer  -->
			<if test="num1!=null and num1!=''">
				and stu_isPay=#{num1}
			</if>
			<if test="num2!=null and num2!=''">
				and stu_isValid=#{num2}
			</if>
			<if test="num3!=null and num3!=''">
				and stu_isReturnVist=#{num3}
			</if>
						
			<if test="text4 !=null and text4!=''">
				and stu_qq like "%"#{text4}"%"
			</if>
			<if test="text5 !=null and text5!=''">
				and stu_CreateTime like "%"#{text5}"%"
			</if>
				<if test="text6 !=null and text6!=''">
				and stu_HomeTime like "%"#{text6}"%"
			</if>
			<if test="text7 !=null and text7!=''">
				and stu_firstVisitTime like "%"#{text7}"%"
			</if>
				<if test="text8 !=null and text8!=''">
				and stu_PayTime like "%"#{text8}"%"
			</if>
			<if test="text9 !=null and text9!=''">
				and stu_isInClass like "%"#{text9}"%"
			</if>
		</where>
	</select>
		<!-- 删除学生 -->
  	<delete id="delectStudent" parameterType="int">
  		delete from students where stu_id=#{stu_id}
  	</delete>
  	<!-- 添加客户 -->
  	<insert id="insertStudent" parameterType="student">
  	 insert into students(stu_Name,stu_Sex,stu_Age,stu_Phone,
  	 stu_Status,stu_PerState,stu_SourceUrl,stu_MsgSource,
  	 stu_Address,stu_NetPusherld,stu_Content,stu_SourceKeyWord,stu_qq,
  	 stu_WeiXin,stu_inClassContent,stu_CreateUser,stu_CreateTime) 
  	  values(#{stu_Name},#{stu_Sex},#{stu_Age},#{stu_Phone},
  	  #{stu_Status},#{stu_PerState},#{stu_SourceUrl},
  	  #{stu_MsgSource}, #{stu_Address},#{stu_NetPusherld},
  	   #{stu_Content},#{stu_SourceKeyWord},#{stu_qq},#{stu_WeiXin},#{stu_inClassContent},
  	   #{stu_CreateUser},#{stu_CreateTime})
  	</insert>
  	<!-- 修改咨询师姓名 -->
  	<update id="updatezixunname" parameterType="student">
  			update students
		<set>
			<if test="stu_ZiXunName!=null and stu_ZiXunName!=''">
				stu_ZiXunName=#{stu_ZiXunName},
			</if>			
		</set>		
			where stu_id=#{stu_id}	
  	</update>
</mapper>